prometheus-adapter:
  prometheus:
    url: http://prometheus.observability.svc

  rules:
    resource:
      cpu:
        containerLabel: container
        containerQuery: sum(rate(container_cpu_usage_seconds_total{<<.LabelMatchers>>,container!=""}[3m])) by (<<.GroupBy>>)
        nodeQuery: sum(rate(container_cpu_usage_seconds_total{<<.LabelMatchers>>, id='/'}[3m])) by (<<.GroupBy>>)
        resources:
          overrides:
            node:
              resource: node
            namespace:
              resource: namespace
            pod:
              resource: pod
      memory:
        containerLabel: container
        containerQuery: sum(container_memory_working_set_bytes{<<.LabelMatchers>>, container!=""}) by (<<.GroupBy>>)
        nodeQuery: sum(container_memory_working_set_bytes{<<.LabelMatchers>>,id='/'}) by (<<.GroupBy>>)
        resources:
          overrides:
          node:
            resource: node
          namespace:
            resource: namespace
          pod:
            resource: pod
      window: 5m