# Changelog

## [0.1.0](https://github.com/2martens/cloud-configuration/compare/v0.0.1...v0.1.0) (2025-08-09)


### Added

* Add basic setup for Payload CMS ([575a6a2](https://github.com/2martens/cloud-configuration/commit/575a6a212f26961384ed304db05a7a45b0404ab7))
* Add deployment to Docker swarm ([ba7b840](https://github.com/2martens/cloud-configuration/commit/ba7b840a8a0b996ab655c919b22dce266f5f3600))
* Add keycloak role that creates the initial setup ([b052116](https://github.com/2martens/cloud-configuration/commit/b05211606cfb61b75dc8243bead4ad20b671343b))
* Add timetable helm chart and argo application ([36686dc](https://github.com/2martens/cloud-configuration/commit/36686dcf81726d2f981a8cdc54e1a88c8680e9bd))
* Add workflow to update nginx-proxy once a week to accommodate new certificates ([f608a2e](https://github.com/2martens/cloud-configuration/commit/f608a2ef4e7dd888104624414c00abed00907d4d))
* **cluster_setup:** Use secret in multiple namespaces ([2b606fb](https://github.com/2martens/cloud-configuration/commit/2b606fb1693a673699b03d79cd3d9a79e9e533c1))
* **prometheus:** Enable grafana sign in with Keycloak ([62e3a61](https://github.com/2martens/cloud-configuration/commit/62e3a61448afecf49836406ad44502fdcc43aad1))
* **routing:** Add routing chart and deployment ([bda63b4](https://github.com/2martens/cloud-configuration/commit/bda63b4063536cc05c4c1b787203cefa31d3b526))
* **setup:** Add support for ecr token helper ([9cf52ee](https://github.com/2martens/cloud-configuration/commit/9cf52ee558e4ebaec9e68397871edafa3ef8af4e))
* **template:** Add ability to configure volumes ([da37575](https://github.com/2martens/cloud-configuration/commit/da375757eaed5f606347e7d58d2c14b5759a29c7))
* **template:** Add support for leader election ([7b31ab7](https://github.com/2martens/cloud-configuration/commit/7b31ab7a2853b94dbf98c162466dc7b2662370e9))


### Changed

* Always deploy if manually started and requested ([f1930ec](https://github.com/2martens/cloud-configuration/commit/f1930eca141c16c06958ccad9ebb6ee202611389))
* Call create-nginx from deploy and run it standalone only for changes to nginx itself ([99548d8](https://github.com/2martens/cloud-configuration/commit/99548d86b1ffe4eb0436a32d9a5383a38c1ee3fa))
* **prometheus:** Add ingress for grafana ([e171a62](https://github.com/2martens/cloud-configuration/commit/e171a62f34ab1f586c886e177d62228b06a9687c))
* **prometheus:** Enable thanos for prometheus on monitoring as well ([15661ee](https://github.com/2martens/cloud-configuration/commit/15661eee3fbe62fbb60dba3f4f8200bf961f4ee4))
* Remove kafka, zookeeper, configserver and routing from cluster ([6c00d86](https://github.com/2martens/cloud-configuration/commit/6c00d864e6f726aad2253d0fdba20a0fedc04019))
* **routing:** Use correct repository ([60bf989](https://github.com/2martens/cloud-configuration/commit/60bf989f183609b0a80c7261464fbf6cdcdac472))
* Set security context by default to restrictive values ([d94fa69](https://github.com/2martens/cloud-configuration/commit/d94fa6945941c23b1ab66a9dadc07dc04d28913f))
* Set security context by default to restrictive values for argo deployments ([1cf2c14](https://github.com/2martens/cloud-configuration/commit/1cf2c14ee729c25ad622b0a35fe81a80c096815c))
* **template:** Set security context by default to restrictive values ([2bc1d19](https://github.com/2martens/cloud-configuration/commit/2bc1d19ee19cb7e997a1cbe33863faedb607be87))
* **thanos:** Add thanos endpoint of monitoring cluster ([0b48a5a](https://github.com/2martens/cloud-configuration/commit/0b48a5a0abd45e5c1e2b91cf5e5974ac991b708d))
* Use pkce and refresh tokens ([725a511](https://github.com/2martens/cloud-configuration/commit/725a511d2ec206439362da1c35a6c52b37682618))
* **wahlrecht:** Add Kafka back ([9d7a883](https://github.com/2martens/cloud-configuration/commit/9d7a88391a96b44d8006fdc592d555662867722d))


### Fixed

* Add arm platform ([7b7de66](https://github.com/2martens/cloud-configuration/commit/7b7de6686a0886310617606b6dc606cff52601aa))
* Add CMD which apparently was missing ([fda1683](https://github.com/2martens/cloud-configuration/commit/fda1683e40f18784fb1ae290eb438ea7d5a36832))
* Add empty line at end ([b8099bf](https://github.com/2martens/cloud-configuration/commit/b8099bfbd6ea3ae0e4af6493c20d69e5346176ea))
* Add environment variable for wahlrecht ([ac45bfa](https://github.com/2martens/cloud-configuration/commit/ac45bfa565651250451193baf41ea4e81446370c))
* Add missing if conditions ([eccc937](https://github.com/2martens/cloud-configuration/commit/eccc937f9239e4f0d35c2888541348ebeaaa9a0e))
* Add missing permissions ([9a9b1dc](https://github.com/2martens/cloud-configuration/commit/9a9b1dc2a34f2fbd1c8936c02fbea239287d3c0b))
* Add missing secrets for Bahn API ([669f9b8](https://github.com/2martens/cloud-configuration/commit/669f9b83d1db3519a921e3ab9b4c38a5e3515d10))
* Add missing step to deploy ([dfcdd98](https://github.com/2martens/cloud-configuration/commit/dfcdd9830e305aefe26ff45b7d381d92b1e7a99f))
* Add paths for documentation for timetable ([47d869d](https://github.com/2martens/cloud-configuration/commit/47d869d3b4996db4e44c86107eed65655a261079))
* Add provenance ([836d204](https://github.com/2martens/cloud-configuration/commit/836d204dd3cd0910a9fdff2aac753c1c73f1585c))
* Add writable volume to /etc/kafka ([b49c5ca](https://github.com/2martens/cloud-configuration/commit/b49c5ca205fbd43cfa53cac1894da98d29513c46))
* Allow timetable namespace ([d0d80e3](https://github.com/2martens/cloud-configuration/commit/d0d80e35dd4c6813ba1e0a4ca522cfac4796718b))
* Api-docs prefix should end without slash ([124d0ee](https://github.com/2martens/cloud-configuration/commit/124d0ee77cabc597515ad6819100662c7a28f9cd))
* **argocd:** Fix URL of cloud configuration ([92831a5](https://github.com/2martens/cloud-configuration/commit/92831a5130ff40481716219be58c84cbaa443c1c))
* Call original entrypoint ([7d66daf](https://github.com/2martens/cloud-configuration/commit/7d66dafc8b3e49995854869cfb318da5665a0dec))
* Change path to repositories ([b79b661](https://github.com/2martens/cloud-configuration/commit/b79b661aba23115730d1ab7dc22991ba1b5eec8e))
* **cluster_setup:** Always use global namespace in helpers ([1dcbf2b](https://github.com/2martens/cloud-configuration/commit/1dcbf2ba7bd837a903044d5327975b7c2f77c95c))
* **cluster_setup:** Pass correct context to helpers ([65c2f40](https://github.com/2martens/cloud-configuration/commit/65c2f403e3aef61306cff7fc9a54b5a364e7696d))
* **configserver:** Mount writable volume for tmp dir ([322aa6e](https://github.com/2martens/cloud-configuration/commit/322aa6ede96ff9cbf1fd175cce4f0fa33c5d01ba))
* **configserver:** Update template chart ([319ecf7](https://github.com/2martens/cloud-configuration/commit/319ecf7171b6b1617ce2493ab4d43c592fe6c3ca))
* Create missing directory ([04a25ed](https://github.com/2martens/cloud-configuration/commit/04a25ed27dc881245b4fb4bfab8099a859ddc827))
* Create timetable namespace ([eb87253](https://github.com/2martens/cloud-configuration/commit/eb8725389e3211065af13d17c23ef504e87e7e75))
* Deploy nginx using a stack file ([ee41c1c](https://github.com/2martens/cloud-configuration/commit/ee41c1ce6450658e6d9ae22b22dc52711243520d))
* Don't create timetable namespace (done by cluster setup) ([aa49e6e](https://github.com/2martens/cloud-configuration/commit/aa49e6e3cc037bdebbd34bb70a2f02af5abdc476))
* Download configs again from git.2martens.de ([968f568](https://github.com/2martens/cloud-configuration/commit/968f568792c39972872e0d7f311185af6b9a7c1d))
* Generate ssl certificates in builder image ([e45f946](https://github.com/2martens/cloud-configuration/commit/e45f9463823441ac31c85c3a8b0269b0a4416477))
* **grafana:** Fix keycloak realm ([d31c01b](https://github.com/2martens/cloud-configuration/commit/d31c01be0d186bd505ff00e6024e6310030fc465))
* **grafana:** Fix path for role_attribute_path ([c51e2a1](https://github.com/2martens/cloud-configuration/commit/c51e2a163addbbc6dad6905da69f6c21917b1418))
* **grafana:** Locate roles of Grafana in JWT ([e5461fd](https://github.com/2martens/cloud-configuration/commit/e5461fdfba34b8aa65dff47579b6a2e877f0d760))
* Group if condition together correctly ([aaee48d](https://github.com/2martens/cloud-configuration/commit/aaee48d8b2acc7142fb758829a8e508ffe4fbbc7))
* **hcloud:** Add hcloud csi driver to monitoring ([d8cfc3a](https://github.com/2martens/cloud-configuration/commit/d8cfc3a8a94637a1baaa08a2db8e3281204bec8e))
* **hcloud:** Fix name of application ([8594617](https://github.com/2martens/cloud-configuration/commit/8594617a87ab06a89129f757e016c893600054f6))
* Include history in checkout ([2c41ec3](https://github.com/2martens/cloud-configuration/commit/2c41ec3569bb3572552209541da823035f3747d0))
* **kafka:** Add writable volume to /var/log/kafka ([5258897](https://github.com/2martens/cloud-configuration/commit/5258897530d97794e16fe9e5d3f4a59fffdc0ac7))
* **kafka:** Increase memory limit to 1Gi ([6bfb4b2](https://github.com/2martens/cloud-configuration/commit/6bfb4b2912ad1ae2ee7173f34d36ffee32535216))
* **kafka:** Reduce retention time to 2 minutes ([a003c00](https://github.com/2martens/cloud-configuration/commit/a003c00b7519b400d9579f9ea87f80d95fb5cf42))
* **kafka:** Update template chart ([72ad9f7](https://github.com/2martens/cloud-configuration/commit/72ad9f7d3d61b036c271ffd8bfd2f177dd035c08))
* **kafka:** Update values ([341bcc2](https://github.com/2martens/cloud-configuration/commit/341bcc23c680ddd66a92d8a52edea5c60a1b44d2))
* **kafka:** Update values file ([d546986](https://github.com/2martens/cloud-configuration/commit/d5469863e9d0651d4e63d114b34e9b3073f8b87e))
* Make sure secret for timetable is added ([9d3b0b5](https://github.com/2martens/cloud-configuration/commit/9d3b0b59f0790deb599108dba8d331ead3eeaad3))
* Only deploy nginx on Swarm managers ([d9e5628](https://github.com/2martens/cloud-configuration/commit/d9e5628766bb89971e4a99e8da21834fbecc191c))
* Only trigger deploy job in main branch ([29070af](https://github.com/2martens/cloud-configuration/commit/29070af718614d0f7f50dbb930f2c682ad8317b3))
* Pass in secret via env config ([ef148c6](https://github.com/2martens/cloud-configuration/commit/ef148c6b3fa199dd45c1a9485aecf8fe63b68803))
* Pre-create directory certificates-enabled.d ([9b9e340](https://github.com/2martens/cloud-configuration/commit/9b9e3400f142109148ec52b330957219954fa788))
* Prevent garbage connection string ([f1bd0e4](https://github.com/2martens/cloud-configuration/commit/f1bd0e47a9dea4e5494a348fecd36970f6bf6407))
* Prevent syntax error and load self-signed certs ([408a0a4](https://github.com/2martens/cloud-configuration/commit/408a0a41a0b361875026b4d0e37dde8b15e2570f))
* **prometheus-adapter:** Use updated name for prometheus ([7e1863c](https://github.com/2martens/cloud-configuration/commit/7e1863cc35342742d8d5b69d65f947c8a3468f8d))
* **prometheus:** Actually mention secret name ([7671ffb](https://github.com/2martens/cloud-configuration/commit/7671ffb17f9baebbfe547b4ffb458b2146ae8177))
* **prometheus:** Added missing root_url property ([79e8648](https://github.com/2martens/cloud-configuration/commit/79e86481389a2822bf3971bbd8050288f9dcbace))
* **prometheus:** Allow observability for vault-secrets operator ([db7ecd0](https://github.com/2martens/cloud-configuration/commit/db7ecd059847d62dcebae231516e0dab466fd181))
* **prometheus:** Provide storage handle ([b441481](https://github.com/2martens/cloud-configuration/commit/b4414816bc3cdab235b385fc38257f0f8fd59cc6))
* **prometheus:** Refer to env variables in config ([127a45c](https://github.com/2martens/cloud-configuration/commit/127a45cfab12af9a03c4e07f9bc57b0c47a4bd68))
* **prometheus:** Updated chart lock files ([01b68cd](https://github.com/2martens/cloud-configuration/commit/01b68cd54119598d6c4bc030d5bb1ca1e9702831))
* **prometheus:** Use correct ingress class name ([d546168](https://github.com/2martens/cloud-configuration/commit/d5461683216b8a410a07ac99defc138fe4ee9313))
* **prometheus:** Use correct IP for monitoring cluster and enable prometheus adapter ([5c269c7](https://github.com/2martens/cloud-configuration/commit/5c269c7118ce58fbdd542bd58f625b3931a2161d))
* **prometheus:** Use different name for observability prometheus ([6e600ac](https://github.com/2martens/cloud-configuration/commit/6e600acb90d73ad963515cd2fb23677f3d0defa1))
* Reference workflow from extra job ([1db1676](https://github.com/2martens/cloud-configuration/commit/1db167616a25b7e43e256d49ba172d00834dd8ab))
* Remove intermediate directory as it does not exist ([b391c38](https://github.com/2martens/cloud-configuration/commit/b391c381ba28496c5329d573fe92cca7107ec5d4))
* Remove intermediate directory at other place ([792762b](https://github.com/2martens/cloud-configuration/commit/792762b674e217f35167a76a1f36e87856e337e9))
* Remove trailing slash for proxy_pass ([859973d](https://github.com/2martens/cloud-configuration/commit/859973d49b2d75cdc9777a3a2551d998a221afdd))
* **routing:** Add reference to secret containing the image pull credentials ([b8a6232](https://github.com/2martens/cloud-configuration/commit/b8a623257b377e4286fbcb34d249a60acdcad1a4))
* **routing:** Allow gti path ([e0c9121](https://github.com/2martens/cloud-configuration/commit/e0c912155cbf890cab8ec85a0001c134e97a227f))
* **routing:** Disable vault ([3891e10](https://github.com/2martens/cloud-configuration/commit/3891e10c45519fb0304bd3ecf57b83f5681ffe6c))
* **routing:** Enable vault ([34fb364](https://github.com/2martens/cloud-configuration/commit/34fb364934ea2ec89c74719c3187d2ea89f0f3c2))
* **routing:** Use public registry ([2fa5d63](https://github.com/2martens/cloud-configuration/commit/2fa5d636a09b5bd85a8bcee216f52b76fae426a6))
* **routing:** Use version 0.5.1 of the template ([b04ac23](https://github.com/2martens/cloud-configuration/commit/b04ac23fb166b73e51d241d907f3f25eb9a4e2ef))
* Search config on github ([efbc3af](https://github.com/2martens/cloud-configuration/commit/efbc3af35366b459d431bc82ff267fa8ef23f25b))
* Setup buildx to support multi-platform ([60e3a11](https://github.com/2martens/cloud-configuration/commit/60e3a117be616a5a28ade910da423a9a303307ed))
* **setup:** Fix configuration for ecr credential helper ([0d2139f](https://github.com/2martens/cloud-configuration/commit/0d2139f78c0b0db1060af763ee31b29c22e76929))
* **setup:** Fix configuration for ecr credential helper ([7df212a](https://github.com/2martens/cloud-configuration/commit/7df212a64925332c25c58e99cc0526440f24a0da))
* **setup:** Use single-line command ([8aa4c92](https://github.com/2martens/cloud-configuration/commit/8aa4c9242f796ecbbf5d25f2a26891d66e5bde07))
* Skip environment if it wasn't changed ([126cd0e](https://github.com/2martens/cloud-configuration/commit/126cd0eb046fcecc0c1035f46385a52fabc953fb))
* Start nginx with self-signed certs until real certs are available ([a89394d](https://github.com/2martens/cloud-configuration/commit/a89394db328bfa40b0ba8191eb6e66be5bb14fd5))
* **template:** Add missing permissions for leader role ([a598fbe](https://github.com/2martens/cloud-configuration/commit/a598fbed4d9740d5d7c73833510e32164df81c61))
* **template:** Don't print empty lists ([7097564](https://github.com/2martens/cloud-configuration/commit/7097564a724d9f0f341e6af32f7479eb4bb0401e))
* **template:** Fix whitespace problem ([f96ab5e](https://github.com/2martens/cloud-configuration/commit/f96ab5e3866bf87dea4f6b474c57fbfa57516419))
* **template:** Mount emptyDir volume for tmp directory ([8a3fd6f](https://github.com/2martens/cloud-configuration/commit/8a3fd6f610d547ca6e7e1769b5d9d0cfdf8b0bed))
* **template:** Move leader role template to root folder ([4dc3d72](https://github.com/2martens/cloud-configuration/commit/4dc3d724850a9d4c4eeb84fe8bd2bdfb510d2802))
* **thanos:** Decrease sync block duration to every 2 hours ([332612a](https://github.com/2martens/cloud-configuration/commit/332612aed2d5cb025391ac404fc3955d0c0a4897))
* **thanos:** Reduce polling frequency ([8accf1c](https://github.com/2martens/cloud-configuration/commit/8accf1c5d51c2242cee1285966d072887d5806ac))
* **thanos:** Remove invalid flag ([2464650](https://github.com/2martens/cloud-configuration/commit/246465002c3fa8d0af9a03be92efb8fa6a3f9f68))
* **thanos:** Remove receive ingestor endpoint ([2eedc90](https://github.com/2martens/cloud-configuration/commit/2eedc908713eae619287d7a5f5dec0bee844373c))
* **thanos:** Remove useless parts ([d761291](https://github.com/2martens/cloud-configuration/commit/d761291d53a0c4b9e967f85da22b6b07f05eaca8))
* **thanos:** Revert previous wrong change ([1b9dd83](https://github.com/2martens/cloud-configuration/commit/1b9dd8327a8d976f824a9a69cff488b74747bd46))
* **thanos:** Use correct name for secret ([420ba84](https://github.com/2martens/cloud-configuration/commit/420ba8436628dcd031538d884794717d97935800))
* **thanos:** Use correct port for thanos query ([3f1534e](https://github.com/2martens/cloud-configuration/commit/3f1534e5947e4331cbcb217d29ff24dcfdfd075a))
* **thanos:** Use correct thanos port ([55fc673](https://github.com/2martens/cloud-configuration/commit/55fc673cc089251ca5d574996dc0719e8f625e0a))
* **thanos:** Use routable endpoint ([f4b86f4](https://github.com/2martens/cloud-configuration/commit/f4b86f4e9d68ec60f9a7f710c200b5f717966042))
* **thanos:** Use shortened endpoint name ([c0d8d66](https://github.com/2martens/cloud-configuration/commit/c0d8d6655308c5b79cbf986a270d1362bf7c410f))
* **thanos:** Use updated thanos discovery endpoint ([3e6c9b7](https://github.com/2martens/cloud-configuration/commit/3e6c9b786f6f84e5fdc174ae85f838b3de9cc549))
* **timetable:** Add missing ingress prefix for stations ([3598f75](https://github.com/2martens/cloud-configuration/commit/3598f753345618cfb1f8e6899074cffc6a3a4871))
* **timetable:** Add missing permissions for leader role ([98c36cd](https://github.com/2martens/cloud-configuration/commit/98c36cd5c3048d9edfc4735ddcec15d2c443bcd2))
* **timetable:** Add missing role for leader election ([394c583](https://github.com/2martens/cloud-configuration/commit/394c583f2a6bdf337307ed072363fdea7368da47))
* **timetable:** Enable leader election ([7efcf8e](https://github.com/2martens/cloud-configuration/commit/7efcf8e1621ab829159710c695f2da1127ceb1cf))
* **timetable:** Remove trailing slash for api docs ([6388d5a](https://github.com/2martens/cloud-configuration/commit/6388d5a0cbda41a8a3b1f961d07527739648e731))
* **timetable:** Update template chart ([ba3b83a](https://github.com/2martens/cloud-configuration/commit/ba3b83a7c317b0463f16315a4a02d9f5cb44bc4e))
* **timetable:** Update template chart ([2c45ae3](https://github.com/2martens/cloud-configuration/commit/2c45ae36efb9ce91c3fa7f8456ce061c73d10fc7))
* Use --detach=false ([bcc3f12](https://github.com/2martens/cloud-configuration/commit/bcc3f127afd8d4afa48b46565ba56ba107dcb064))
* Use actions from Docker for publishing image ([efa3119](https://github.com/2martens/cloud-configuration/commit/efa3119e6a4332c0f5965ca3a3743119fe9321e0))
* Use correct service name ([ea4d287](https://github.com/2martens/cloud-configuration/commit/ea4d2872ad4906de98422f60e8c40b564431afe5))
* Use cp instead of symlink ([e55dd1e](https://github.com/2martens/cloud-configuration/commit/e55dd1ed0a16d09a9af24cdbe61ecd6e005fb63b))
* Use writable volume for tmp dir ([5718146](https://github.com/2martens/cloud-configuration/commit/5718146c0d8013301e494da66f24ea50352550c2))
* **vault:** Add vault support to monitoring cluster ([4fcea19](https://github.com/2martens/cloud-configuration/commit/4fcea19d400f5be0117d92c64d94b5f606f52c0f))
* **wahlrecht:** Don't use kafka ([44b18d9](https://github.com/2martens/cloud-configuration/commit/44b18d93930c344ba3947ae0193dd58fe50e90f5))
* **wahlrecht:** Fix keycloak realm ([cfb6098](https://github.com/2martens/cloud-configuration/commit/cfb609855b0a6e323591a7904c7c94e6353b6be2))
* **wahlrecht:** Prevent endless loop ([018f110](https://github.com/2martens/cloud-configuration/commit/018f110624d9699b4b0f9ffae84dccf53e52727e))
* **wahlrecht:** Remove memory leak ([9d7a883](https://github.com/2martens/cloud-configuration/commit/9d7a88391a96b44d8006fdc592d555662867722d))
* **wahlrecht:** Update template chart ([d94a885](https://github.com/2martens/cloud-configuration/commit/d94a8859347a46c43939d2ae8b6773745e4a24cf))
* **wahlrecht:** Update values ([ab5bb8c](https://github.com/2martens/cloud-configuration/commit/ab5bb8caf8927c6f5129ed43088de3e64ff11a71))
* **zookeeper:** Add writable volume to /var/log/kafka ([2ab511e](https://github.com/2martens/cloud-configuration/commit/2ab511ecb357ba938eb16b39af9fee9d7b125261))
* **zookeeper:** Update template chart ([22ef3b6](https://github.com/2martens/cloud-configuration/commit/22ef3b63294edb4c6015d757bb5c9b6c714a43bf))
