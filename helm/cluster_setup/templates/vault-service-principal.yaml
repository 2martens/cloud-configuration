{{- if .Values.vault.enabled -}}
apiVersion: v1
kind: Namespace
metadata:
  name: {{ $.Values.vault.namespace }}
{{- range .Values.vault.applicationNamespaces }}
---
apiVersion: v1
kind: Secret
metadata:
  name: vault-service-principal
  namespace: {{ .name }}
data:
  clientID: {{ $.Values.vault.clientId | b64enc }}
  clientSecret: {{ $.Values.vault.clientSecret | b64enc }}
{{- end }}
{{- end }}